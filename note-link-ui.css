/* Note Link UI
   version: v0.6.9-fix9 / No.13
   - サイドバー幅は一定（黒）
   - 折畳みは上のみ／△は中抜き・大きめ（畳むと▽に反転）
   - 設定パネルは常に最前面
   - 上部バーは目立つ青
*/
:root{
  --ink:#e5e7eb;
  --bg:#0b1020;
  --muted:#2a2f3a;
  --accent:#59c878;
  --accent-weak:#52d19a;
  --shadow:0 0 1px rgba(0,0,0,.2), 0 6px 18px rgba(0,0,0,.35);
  --topbar-bg:#0a58ff;
  --sbw:60px;      /* サイドバー幅：固定 */
}

html,body{height:100%}
html{background:var(--bg); color:var(--ink); font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif}
*,*:before,*:after{box-sizing:border-box}

/* ==== Topbar ==== */
.topbar{
  height:44px; display:flex; align-items:center; justify-content:space-between;
  padding:0 10px; border-bottom:1px solid rgba(255,255,255,.18);
  background:var(--topbar-bg); color:#fff; position:sticky; top:0; z-index:20;
  box-shadow:0 2px 12px rgba(10,88,255,.35);
}
.topbar .brand{font-weight:700}
.actions{display:flex; gap:8px}
.btn{height:28px; padding:0 10px; border-radius:10px; background:rgba(255,255,255,.15); border:1px solid rgba(255,255,255,.3); color:#fff; cursor:pointer}
.btn.small{height:24px; padding:0 8px}
.btn.danger{border-color:#e35; color:#ffd1dc; background:rgba(227,53,83,.18)}
.btn:active{transform:translateY(1px)}

/* ==== Layout ==== */
#wrap{display:grid; grid-template-columns: var(--sbw) 1fr; height:calc(100% - 44px)}

/* ==== Sidebar（黒で固定幅） ==== */
#sidebar{
  width:var(--sbw); padding:8px 6px; border-right:1px solid #000;
  background:#000; display:flex; flex-direction:column; gap:8px; overflow:hidden;
}
#sidebar .fill{flex:1 1 auto}

/* 畳み：中身を非表示（幅はそのまま） */
#sidebar[data-collapsed="1"] > .tool-btn:not(.fold),
#sidebar[data-collapsed="1"] > .fill,
#sidebar[data-collapsed="1"] > .gear{ display:none; }

/* ==== Tool buttons ==== */
.tool-btn{
  width:48px; height:48px; display:grid; place-items:center;
  border:1px solid #1a1a1a; border-radius:12px;
  background:#0e0e0e; color:var(--ink); cursor:pointer; outline:none;
}
.tool-btn svg{width:24px; height:24px}
.tool-btn.ghost{background:transparent}
.tool-btn.fold{height:40px}
.tool-btn.fold svg{width:28px; height:28px; transition:transform .15s}
#btnFold[data-dir="down"] svg{ transform:rotate(180deg); }

.tool-btn.active{
  border-color:var(--accent);
  box-shadow:0 0 0 2px var(--accent), var(--shadow);
}

/* ==== Stage / Canvas ==== */
#stage{position:relative; overflow:hidden}
#canvas{width:100%; height:100%; display:block; background:var(--bg)}

/* ==== Settings panel ==== */
#settingsPanel{
  position:fixed; left:16px; top:72px; width:340px; padding:12px;
  border:1px solid rgba(255,255,255,.2); border-radius:12px; background:rgba(12,14,22,.98);
  box-shadow:var(--shadow); z-index:2000;
}
#settingsPanel .panel-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
#settingsPanel #panelTitle{font-weight:700}
#settingsPanel .pane{display:grid; gap:10px}
#settingsPanel label{display:flex; align-items:center; justify-content:space-between; gap:10px}
#settingsPanel input[type="color"]{width:44px; height:24px; border:1px solid var(--muted); background:transparent; border-radius:6px}
#settingsPanel input[type="range"]{flex:1}
.hint{opacity:.7; font-size:12px}

@media (max-width:720px){
  #settingsPanel{left:12px; width:300px}
}
