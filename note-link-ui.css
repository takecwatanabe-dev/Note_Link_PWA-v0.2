/* Note Link UI stylesheet
   version: v0.6.9-fix10 / No.13
   purpose: 上部バーの色, ツールバー折り畳み(上方向), アクティブ表示, 安定した設定パネル
*/

:root{
  --ink:#e6f1ff;
  --ink-dim:#9db6d9;
  --bg:#0b0f14;
  --panel:#0f1420;
  --panel-2:#0c111b;
  --accent:#4f7cff;
  --accent-weak:#2a54ff;
  --ok:#2dd4bf;
  --danger:#ef4444;
  --shadow:0 10px 24px rgba(0,0,0,.45);
}

html, body { height:100%; background:var(--bg); color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif; }
* { box-sizing:border-box; }

/* ===== 上部メインバー ===== */
header.topbar{
  position:sticky; top:0; left:0; right:0; z-index:50;
  height:44px; display:flex; align-items:center; gap:8px;
  padding:0 12px;
  background:linear-gradient(0deg, var(--accent-weak), var(--accent));
  border-bottom:1px solid rgba(255,255,255,.08);
}
header.topbar .title{ font-weight:600; }
header.topbar .spacer{ flex:1; }
header.topbar .btn{
  height:28px; padding:0 10px; border-radius:10px;
  display:inline-flex; align-items:center; gap:6px;
  font-size:12px; color:white; background:rgba(255,255,255,.15);
  border:1px solid rgba(255,255,255,.22);
}
header.topbar .btn:hover{ background:rgba(255,255,255,.22); transform:translateY(-1px); }
header.topbar .btn:active{ transform:translateY(0); }

/* ===== Canvas wrapper ===== */
#wrap{ position:relative; width:100%; height:calc(100% - 44px); }
#stage{ position:absolute; inset:0; }

/* ===== 左ツールバー ===== */
#sidebar{
  position:absolute; left:8px; top:64px; z-index:40;
  width:48px; padding:6px; border-radius:12px;
  background:rgba(0,0,0,.82);
  box-shadow: var(--shadow);
  display:flex; flex-direction:column; gap:6px;
  transition:transform .28s ease, opacity .2s ease;
}
/* 折り畳み：上方向。トグルの高さ分だけ見せる */
#sidebar[data-collapsed="1"]{
  transform: translateY(calc(-100% + 44px));
}

/* トグル（△/▽）中抜きで大きめ */
#toggle{
  width:36px; height:36px; border-radius:10px;
  background:var(--panel-2); border:1px solid rgba(255,255,255,.15);
  display:grid; place-items:center; cursor:pointer;
}
#toggle svg{ width:18px; height:18px; stroke:var(--ink); fill:none; stroke-width:2.5; }

/* ツールボタン */
.tool{
  width:36px; height:36px; border-radius:10px; cursor:pointer;
  background:var(--panel); border:1px solid rgba(255,255,255,.12);
  display:grid; place-items:center; color:var(--ink);
}
.tool svg{ width:18px; height:18px; }
.tool:hover{ outline:2px solid rgba(79,124,255,.35); }
.tool.active{ outline:2px solid var(--ok); box-shadow:0 0 0 2px rgba(0,0,0,.6) inset; }

/* 設定（ギア）は最下部に固定 */
#gear-wrap{ margin-top:auto; }

/* ===== 設定パネル（共通箱＋中身切替） ===== */
.panel{
  position:absolute; left:62px; top:56px; z-index:45;
  min-width:300px; background:rgba(12,17,27,.95);
  border:1px solid rgba(255,255,255,.14); border-radius:12px;
  padding:14px; box-shadow:var(--shadow);
  display:none;
}
.panel.show{ display:block; }
.panel h4{ margin:0 0 10px; font-size:14px; color:var(--ink); }
.row{ display:flex; align-items:center; gap:10px; margin:10px 0; }
.row label{ width:76px; font-size:12px; color:var(--ink-dim); }
.row input[type="range"]{ flex:1; }
.row input[type="color"]{ width:32px; height:22px; padding:0; border:0; background:transparent; }

.panel .close{
  position:absolute; right:10px; top:10px; height:26px; padding:0 10px;
  border-radius:8px; border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.08); color:var(--ink); font-size:12px;
}

/* ===== ツールチップ ===== */
[data-tip]{ position:relative; }
[data-tip]:hover:after{
  content:attr(data-tip);
  position:absolute; left:48px; top:50%; transform:translateY(-50%);
  background:#222a; color:#fff; font-size:12px; padding:4px 8px; border-radius:8px;
  white-space:nowrap; pointer-events:none;
}

/* キャンバス側は左余白を作らない（ツールバーはオーバーレイ） */
#wrap, #stage{ padding-left:0; }
