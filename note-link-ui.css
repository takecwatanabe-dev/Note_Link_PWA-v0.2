/* Note Link UI stylesheet
   version: v0.6.9-fix16 / No.13
   - △/▽ の中抜き三角、折畳み時の自動回転（CSS）
   - ギア白固定
   - スマホでの縦書き強制を横書きに固定
   - ツール選択の緑ライン、z-index整理 など */
:root{
  --ink:#e6fff1;         /* 文字/アイコン（白寄り） */
  --ink-dim:#96b6d9;     /* 補助文字 */
  --bg:#0b0f1a;          /* 背景 */
  --panel:#0f1420;       /* 設定パネル */
  --panel-2:#0c111b;
  --accent:#4f7cff;      /* 上部バー */
  --accent-weak:#2a54ff;
  --ok:#2dd4bf;
  --danger:#ef4444;
  --shadow:0 10px 24px rgba(0,0,0,.45);
}
*{ box-sizing:border-box; }
html,body{ height:100%; background:var(--bg); color:var(--ink); font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif; overflow:hidden; }

/* ===== 上部メインバー（スマホでも横書き固定） ===== */
.topbar{
  position:sticky; top:0; left:0; right:0; height:44px; z-index:50;
  display:flex; align-items:center; gap:6px; padding:0 12px;
  background:linear-gradient(0deg, var(--accent-weak), var(--accent));
  color:#fff; border-bottom:1px solid rgba(255,255,255,.15);
  writing-mode: horizontal-tb !important; -webkit-writing-mode: horizontal-tb !important;
  text-orientation: mixed !important; -webkit-text-orientation: mixed !important;
}
.topbar *{
  writing-mode: horizontal-tb !important; -webkit-writing-mode: horizontal-tb !important;
  text-orientation: mixed !important; -webkit-text-orientation: mixed !important;
}
.topbar .brand{ font-size:12px; opacity:.85; }
.topbar .spacer{ flex:1; }
.topbar button{
  height:28px; padding:0 10px; border-radius:10px;
  background:rgba(255,255,255,.22); border:1px solid rgba(255,255,255,.22); color:#fff;
}
.topbar button:hover{ transform:translateY(1px); }
.build-tag{ padding:0 6px; border-radius:8px; background:rgba(255,255,255,.22); }

/* ===== ラッパー／ステージ ===== */
#wrap{ position:relative; width:100%; height:calc(100% - 44px); }
#stage{ position:absolute; inset:0 0 0 64px; }
#canvas,#overlay{ width:100%; height:100%; display:block; }

/* ===== サイドバー ===== */
.sidebar{
  position:absolute; left:0; top:0; bottom:0; width:64px; padding:6px; z-index:49;
  background:#000e; box-shadow:var(--shadow);
  display:flex; flex-direction:column; align-items:center; gap:8px;
}
.sidebar .tool{
  width:36px; height:36px; display:grid; place-items:center;
  background:rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.12); border-radius:10px;
  color:var(--ink); cursor:pointer;
}
.sidebar .tool svg{ width:18px; height:18px; }
.sidebar .tool.active{
  outline:2px solid rgba(97,224,155,.88);
  box-shadow:0 0 0 2px rgba(0,0,0,.6) inset;
  color:var(--ok);
}
.sidebar .gear svg{ color:#fff; }          /* ギアは白で固定 */
.sidebar .chev{ transition:transform .18s ease; }
.sidebar[data-collapsed="1"] .chev{ transform:rotate(180deg); } /* ▽ */

.sidebar[data-collapsed="1"]{ height:45px; width:64px; }
.sidebar[data-collapsed="1"] .tool{ display:none; }
.sidebar[data-collapsed="1"] #btn-collapse{ display:grid; }
.sidebar[data-collapsed="1"] + #stage{ inset:0 0 0 64px; } /* 幅は同じで崩れない */

/* ===== 設定パネル ===== */
.panel{
  position:absolute; left:72px; top:56px; z-index:55; min-width:300px;
  background:rgba(12,17,27,.95); border:1px solid rgba(255,255,255,.14);
  border-radius:12px; padding:10px; box-shadow:var(--shadow);
}
.panel[hidden]{ display:none; }
.panel h4{ margin:0 0 10px; font-size:14px; color:var(--ink); cursor:grab; }
.row{ display:flex; align-items:center; gap:10px; margin:10px 0; }
.row label{ width:90px; font-size:12px; color:var(--ink-dim); }
.row input[type="range"]{ flex:1; }
.row input[type="color"]{ width:32px; height:22px; padding:0; border:0; background:transparent; }
.panel .seg label{ margin-right:10px; }
.panel .danger{ background:var(--danger); color:#fff; border:1px solid rgba(255,255,255,.18); }
.panel .hint{ font-size:11px; color:#bcd; opacity:.8; }
.panel .close{
  position:absolute; right:10px; top:10px; height:26px; padding:0 10px;
  border-radius:8px; background:rgba(255,255,255,.18); color:var(--ink);
}

/* ===== ツールチップ ===== */
[data-tip]{ position:relative; }
[data-tip]:hover::after{
  content:attr(data-tip); position:absolute; left:48px; top:50%;
  transform:translateY(-50%); background:#222c; color:#fff; font-size:12px;
  padding:4px 8px; border-radius:8px; white-space:nowrap; pointer-events:none;
}
